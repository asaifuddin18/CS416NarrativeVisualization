<!DOCTYPE html>
<html>
    <head>
        <style>
            .button {
            background-color: #e7e7e7;
            border: none;
            color: black;
            padding: 10px 10px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 10px;
            transition-duration: .5s;
            width: 100px;
        }
        /*https://stackoverflow.com/questions/52050828/show-tooltip-on-the-d3-map*/
        div.tooltip {   
    position: absolute;         
    text-align: center;                      
    font: 12px sans-serif;      
    background: lightsteelblue; 
    border: 0px;        
    border-radius: 8px;         
    pointer-events: none;           
}
        .button:hover {
            background-color: #000000;
            color: white;
        }
        .center_div {
            display: flex;
            justify-content: center;
        }
        </style>
    </head>
    <body>
        <div class="center_div">
            <button class="button" onclick = "window.location.href='index.html'">First Page</button>
            <button class="button" onclick = "window.location.href='linegraph.html'">Second Page</button>
            <button class="button">Third Page</button>
            <button class="button">Fourth Page</button>
        </div>
        <select id="selectButton"></select>
        <div id="graph_div" class="center_div">
        </div>
    </body>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script>

        // set the dimensions and margins of the graph
        var margin = {top: 10, right: 100, bottom: 30, left: 30},
            width = 460 - margin.left - margin.right,
            height = 400 - margin.top - margin.bottom;
        
        // append the svg object to the body of the page
        var svg = d3.select("#graph_div")
          .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform",
                  "translate(" + margin.left + "," + margin.top + ")");
        
        //Read the data
        d3.csv("https://raw.githubusercontent.com/asaifuddin18/asaifuddin18.github.io/main/gdp_growth.csv", function(data) {
        
            // List of groups (here I have one group per column)
            var allGroup = ["China", "Japan", "United States", "European Union"]
        
            // add the options to the button
            d3.select("#selectButton")
              .selectAll('myOptions')
                 .data(allGroup)
              .enter()
                .append('option')
              .text(function (d) { return d; }) // text showed in the menu
              .attr("value", function (d) { return d; }) // corresponding value returned by the button
        
            // Add X axis --> it is a date format
            var x = d3.scaleLinear()
              .domain([0,10])
              .range([ 0, width ]);
            svg.append("g")
              .attr("transform", "translate(0," + height + ")")
              .call(d3.axisBottom(x));
        
            // Add Y axis
            var y = d3.scaleLinear()
              .domain( [0,20])
              .range([ height, 0 ]);
            svg.append("g")
              .call(d3.axisLeft(y));
        
            // Initialize line with group a
            var line = svg
              .append('g')
              .append("path")
                .datum(data)
                .attr("d", d3.line()
                  .x(function(d) { return x(+d.year) })
                  .y(function(d) { return y(+d.UnitedStates) })
                )
                .attr("stroke", "black")
                .style("stroke-width", 4)
                .style("fill", "none")
        
            // Initialize dots with group a
            var dot = svg
              .selectAll('circle')
              .data(data)
              .enter()
              .append('circle')
                .attr("cx", function(d) { return x(+d.year) })
                .attr("cy", function(d) { return y(+d.United_States) })
                .attr("r", 7)
                .style("fill", "#69b3a2")
        
        
            // A function that update the chart
            function update(selectedGroup) {
        
              // Create new data with the selection?
              var dataFilter = data.map(function(d){return {year: d.year, value:d[selectedGroup]} })
        
              // Give these new data to update line
              line
                  .datum(dataFilter)
                  .transition()
                  .duration(1000)
                  .attr("d", d3.line()
                    .x(function(d) { return x(+d.year) })
                    .y(function(d) { return y(+d.value) })
                  )
              dot
                .data(dataFilter)
                .transition()
                .duration(1000)
                  .attr("cx", function(d) { return x(+d.year) })
                  .attr("cy", function(d) { return y(+d.value) })
            }
        
            // When the button is changed, run the updateChart function
            d3.select("#selectButton").on("change", function(d) {
                // recover the option that has been chosen
                var selectedOption = d3.select(this).property("value")
                // run the updateChart function with this selected option
                update(selectedOption)
            })
        
        })
        
        </script>
</html>
